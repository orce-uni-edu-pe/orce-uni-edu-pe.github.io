$(function(){window.asistencias=function(){return{id:"step-asistencia",init:function(){let e=this;window.BlockSection(e.id),r().then(function(a){let t=a.estadisticas;t.cantidad_clases_faltan_registrar=t.cantidad_clases-t.cantidad_clases_registradas,t.cantidad_inasistencias=t.cantidad_clases_registradas-t.cantidad_asistencias,$("#txt-nro-clases").html(t.cantidad_clases),$("#txt-nro-clases-registradas").html(t.cantidad_clases_registradas),$("#txt-nro-asistencias").html(t.cantidad_asistencias),t.cantidad_asistencias?$("#txt-prj-asistencias").html(parseInt(100*t.cantidad_asistencias/t.cantidad_clases_registradas,10)+"%"):$("#txt-prj-asistencias").html("0%"),t.cantidad_inasistencias?$("#txt-prj-inasistencias").html(parseInt(100*t.cantidad_inasistencias/t.cantidad_clases_registradas,10)+"%"):$("#txt-prj-inasistencias").html("0%"),l(t),$("#"+e.id).unblock()}).catch(function(a){window.showErrors(a)})}}}();function r(){return new Promise(function(e,a){$.ajax({url:"/informacion-academica/cursos/estadisticas-asistencias",type:"POST",dataType:"json",data:{codper,codcur,seccion},success:function(t){e(t)},error:function(t,o,n){a(n)}})})}function l(e){let a,t;isDarkStyle?(a=config.colors_dark.headingColor,t=config.colors_dark.bodyColor):(a=config.colors.headingColor,t=config.colors.bodyColor);const o=document.querySelector("#donutChart-clases"),n={chart:{height:390,type:"donut"},labels:["Clases Dictadas","Clases no Dictadas"],series:[e.cantidad_clases_registradas,e.cantidad_clases_faltan_registrar],colors:["#0054a6","#4d88ff"],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:function(s,d){return parseInt(s,10)+"%"}},legend:{show:!0,position:"bottom",markers:{offsetX:-3},itemMargin:{vertical:3,horizontal:10},labels:{colors:t,useSeriesColors:!1}},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"2rem",fontFamily:"Public Sans"},value:{fontSize:"1.2rem",color:t,fontFamily:"Public Sans",formatter:function(s){return parseInt(s,10)}},total:{show:!0,fontSize:"1.5rem",color:a,label:"Clases Dictadas",formatter:function(s){return e.cantidad_clases_registradas?parseInt(e.cantidad_clases_registradas,10):"0"}}}}}},responsive:[{breakpoint:992,options:{chart:{height:380},legend:{position:"bottom",labels:{colors:t,useSeriesColors:!1}}}},{breakpoint:576,options:{chart:{height:320},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"1.5rem"},value:{fontSize:"1rem"},total:{fontSize:"1.5rem"}}}}},legend:{position:"bottom",labels:{colors:t,useSeriesColors:!1}}}},{breakpoint:420,options:{chart:{height:280},legend:{show:!1}}},{breakpoint:360,options:{chart:{height:250},legend:{show:!1}}}]};typeof o!==void 0&&o!==null&&new ApexCharts(o,n).render();const i=document.querySelector("#donutChart-asistencias"),c={chart:{height:390,type:"donut"},labels:["Asistencias","Inasistencias"],series:[e.cantidad_asistencias,e.cantidad_inasistencias],colors:["#1b5e20","#d84315"],stroke:{show:!1,curve:"straight"},dataLabels:{enabled:!0,formatter:function(s,d){return parseInt(s,10)+"%"}},legend:{show:!0,position:"bottom",markers:{offsetX:-3},itemMargin:{vertical:3,horizontal:10},labels:{colors:t,useSeriesColors:!1}},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"2rem",fontFamily:"Public Sans"},value:{fontSize:"1.2rem",color:t,fontFamily:"Public Sans",formatter:function(s){return parseInt(s,10)+"%"}},total:{show:!0,fontSize:"1.5rem",color:a,label:"Asistencias",formatter:function(s){return parseInt(e.cantidad_asistencias,10)}}}}}},responsive:[{breakpoint:992,options:{chart:{height:380},legend:{position:"bottom",labels:{colors:t,useSeriesColors:!1}}}},{breakpoint:576,options:{chart:{height:320},plotOptions:{pie:{donut:{labels:{show:!0,name:{fontSize:"1.5rem"},value:{fontSize:"1rem"},total:{fontSize:"1.5rem"}}}}},legend:{position:"bottom",labels:{colors:t,useSeriesColors:!1}}}},{breakpoint:420,options:{chart:{height:280},legend:{show:!1}}},{breakpoint:360,options:{chart:{height:250},legend:{show:!1}}}]};typeof i!==void 0&&i!==null&&new ApexCharts(i,c).render()}});
